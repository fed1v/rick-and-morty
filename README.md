# Rick And Morty

**Было реализовано следующее:**
1. Splash Screen с логотипом Rick And Morty
2. BottomNavigationView для навигации по основным экранам
3. Toolbars:
   - На основных экранах содержат кнопки для поиска и фильтров
   - На экранах с деталями содержат кнопку Back

4. Основные экраны (списков персонажей, локаций и эпизодов)
5. Экраны с деталями персонажей, локаций и эпизодов
6. Фильтры
7. Progress бары во время загрузки данных
8. Если по запросу пользователя не было найдено данных, то пользователь уведомляется об этом
9. Получение данных для всех экранов из API [Rick and Morty Api](https://rickandmortyapi.com/)
10. Поиск персонажей, локаций, эпизодов по имени
11. Навигация:
    - Переход на детали элемента после нажатия на этот элемент
    - Обработка системной кнопки Back, а также кнопки Back, расположенной в Тулбарах фрагментов с деталями

12. Уведомление пользователя об отсутствии интернета
13. Кеширование данных
14. Pull-to-Refresh
15. Пагинация
16. Тесты


## Архитектура приложения
Приложение построено по принципу Single-Activity.  
Приложение разделено на слои data, domain, presentation в соответствии с Clean Architecture.  
Для экранов применяется паттерн MVVM.


## UI приложения
Приложение состоит из 3 основных экранов (списки персонажей, эпизодов и локаций) и из 3 экранов с деталями персонажей, эпизодов и локаций.

*Список персонажей*

![characters_list](https://user-images.githubusercontent.com/92691092/177751222-e5687abd-2562-4691-a6e5-5eeab8f539c3.jpg)

На изображении выше представлен список с персонажами. Списки эпизодов и локаций выглядят похожим образом.  
При нажатии на персонажа откроется фрагмент с деталями соответствующего персонажа.

*Детали персонажа*

![character_details](https://user-images.githubusercontent.com/92691092/177751197-f6674ca5-1c53-4a09-90c0-ee6757f8546e.jpg)

На изображении выше показан фрагмент с деталями персонажа. Фрагменты с деталями эпизодов и локаций выглядят похожим образом.  
При нажатии на Location или Origin откроется соответствующий фрагмент с деталями локации.  
При нажатии на эпизод откроется фрагмент с деталями выбранного эпизода.

Больше скриншотов приложения можно посмотреть [здесь](https://github.com/fed1v/rick-and-morty/issues/11)

## Основные функции

### Splash Screen
При запуске приложения показывается логотип Rick And Morty. 

### Получение данных из API
Для работы с API в приложении используется библиотека Retrofit.  
Для получения элементов были созданы интерфейсы для работы с Api. В этих интерфейсах были описаны методы с использованием аннотаций из Retrofit. При помощи этих методов к API отправляются GET-запросы и приложение получает данные, которые впоследствии обрабатываются и показываются пользователю.

### Кеширование
В приложении используется библиотека Room для работы с локальной базой данных. В базу данных сохраняются все персонажи, эпизоды, локации, которые были получены из API.  
Кеширование реализовано по принципу Single Source Of Truth, то есть, приложение сначала добавляет элементы в базу данных, а потом получает их оттуда и впоследствии показывает пользователю.    
При отсутствии интернета пользователю будут показаны данные, хранящиеся в кеше. С ними можно полноценно работать, так же, как и с данными, полученными из API.

Для работы с базой данных были созданы таблицы для хранения персонажей, эпизодов и локаций. Также были созданы таблицы для хранения RemoteKeys персонажей, эпизодов и локаций (для работы с пагинацией).
Были созданы Dao интерфейсы, в которых описаны методы для работы с таблицами.

### Фильтры и поиск
Приложение поддерживает фильтрацию персонажей, эпизодов и локаций по параметрам, а также поиск по имени.  
В тулбарах фрагментов со списками расположены кнопки для поиска и фильтров.  
При нажатии на кнопку поиска, в тулбаре появится SearchView, при помощи которого можно осуществить поиск.  
При нажатии на кнопку фильтров, откроется AlertDialog, в котором можно выбрать фильтры. При нажатии на кнопку Apply, фильтры будут применены. При нажатии на Reset фильтры сбросятся.  

Для упрощения работы с фильтрами были созданы дополнительные классы FiltersHelpers, в которых описана логика работы Alert-диалогов.

### Навигация
Навигация реализована при помощи FragmentManager. Для навигации по основным экранам было создано BottomNavigationView.  
При нажатии пользователем на кнопку из BottomNavigationView, откроется фрагмент со списком соответствующих элементов.  
  
При нажатии на элемент в списке, откроется фрагмент с деталями этого элемента.  
При нажатии кнопки Back откроется предыдущий фрагмент. Если текущий фрагмент - фрагмент со списком персонажей, то при нажатии кнопки Back приложение закроется.  

### Прогресс бары
При открытии фрагмента со списком, в центре экрана показывается Progress Bar до тех пор, пока не загрузятся элементы.  
При подргузке новых элементов из API внизу экрана появляется Progress Bar.   
Также Progress бары показываются при загрузке деталей элемента.  

### Пагинация
В приложение добавлена пагинация. Для ее реализации были использованы RemoteMediators из библиотеки Paging3.

### Pull-to-Refresh
На основных экранах реализован функционал Pull-to-Refresh. Когда пользователь выполняет Pull-to-Refresh, в списке обновляются данные.

### Уведомление пользователя об ошибках
В случае, если по запросу пользователя не было найдено данных, на экран выводится Toast с текстом "Nothing found".  
Если у пользователя отсутствует интернет, на экран выведется Toast, информирующий об этом.

## Дополнительно
В data слое приложения созданы мапперы для маппинга из Dto в Entity и из Entity в domain model.  
В presentation слое созданы мапперы Domain model -> Presentation model.  

Для загрузки изображений в приложении используется библиотека Glide.  
Для внедрения зависимостей используется Dagger 2.
